---
import Clock from '@lucide/astro/icons/clock';
import User from '@lucide/astro/icons/user';
import { cls } from '@/src/lib/utils';

type SupportedLocale =
  | 'es'
  | 'es-ES'
  | 'es-MX'
  | 'es-AR'
  | 'es-CL'
  | 'es-CO'
  | 'es-PE'
  | 'es-VE'
  | 'es-UY'
  | 'es-EC'
  | 'es-US'
  | 'en'
  | 'en-US'
  | 'en-GB'
  | 'en-CA'
  | 'en-AU'
  | 'en-IN'
  | 'fr'
  | 'fr-FR'
  | 'fr-CA'
  | 'fr-BE'
  | 'fr-CH'
  | 'de'
  | 'de-DE'
  | 'de-AT'
  | 'de-CH'
  | 'it'
  | 'it-IT'
  | 'it-CH'
  | 'pt'
  | 'pt-PT'
  | 'pt-BR'
  | 'zh'
  | 'zh-CN'
  | 'zh-TW'
  | 'zh-HK'
  | 'ja'
  | 'ja-JP'
  | 'ko'
  | 'ko-KR'
  | 'ru'
  | 'ru-RU';

interface Props {
  pubDate: Date;
  locale: SupportedLocale;
  author?: string;
  timeRead?: string;
  category: { title: string; path: string };
  class?: string;
}

const { pubDate, locale, author, timeRead, category, class: className } = Astro.props as Props;
---

<div
  data-slot="post-meta"
  class={cls(
    `
     not-prose text-[0.85rem] md:text-[1rem] [&_svg]:w-3 [&_svg]:h-3
     [&_svg]:-mt-0.5 [&_svg]:inline-block [&_svg]:opacity-80 *:inline-block
     md:[&_svg]:w-4 md:[&_svg]:h-4
     `,
    className
  )}
>
  <p>
    <Clock />
    <time datetime={pubDate.toISOString()}>
      {
        pubDate.toLocaleDateString(locale, {
          day: 'numeric',
          month: 'short',
          year: 'numeric',
        })
      }
    </time>
    &nbsp;·
    {
      author && (
        <>
          <User />
          <span>{author}</span>
          <span>&nbsp;·</span>
        </>
      )
    }
    <a
      aria-label={category.title}
      href={category.path}
      data-slot="post-meta-anchor"
      class="transition-all duration-200 hover:underline hover:underline-offset-2"
    >
      {category.title}
    </a>
    {
      timeRead && (
        <>
          <span>&nbsp;·</span>
          <span>{timeRead}</span>
        </>
      )
    }
  </p>
</div>
