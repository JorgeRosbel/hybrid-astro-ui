---
import { Image } from 'astro:assets';
import { cls } from '@/src/lib/utils';
import { type ImageMetadata } from 'astro';

interface Props {
  renderMode: 'static' | 'dynamic';
  size: 'small' | 'medium' | 'large' | 'extralarge';
  class?: string;
  src: ImageMetadata | string;
  alt: string;
  loading: 'lazy' | 'eager';
  decoding: 'async' | 'auto' | 'sync';
}

const sizeClasses = new Map([
  ['small', 'h-5 w-5'],
  ['medium', 'h-6 w-6'],
  ['large', 'h-8 w-8'],
  ['extralarge', 'h-12 w-12'],
]);

const { renderMode, size, class: className, src, alt, loading, decoding } = Astro.props as Props;

const mixed_classes = cls('rounded-full bg-accent-foreground', sizeClasses.get(size), className);
---

<div class={mixed_classes}>
  {
    renderMode === 'static' ? (
      <Image
        src={src as ImageMetadata}
        alt={alt}
        class="w-full h-full  rounded-full m-0!"
        loading={loading}
        decoding={decoding}
      />
    ) : renderMode === 'dynamic' ? (
      <img
        src={src as string}
        class="w-full h-full  rounded-full m-0!"
        width={100}
        height={100}
        loading={loading}
        decoding={decoding}
        alt={alt}
      />
    ) : null
  }
</div>
